{"version":3,"sources":["webpack:///webpack/bootstrap e9efd3094ebf2d174518","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./server/errors/index.js","webpack:///external \"debug\"","webpack:///./server/models/user.js","webpack:///./server/models/s3Document.js","webpack:///./server/config/hayum.config.js","webpack:///./server/index.js","webpack:///external \"body-parser\"","webpack:///external \"path\"","webpack:///./server/controllers/index.js","webpack:///./server/controllers/item.controller.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"crypto\"","webpack:///./server/models/message.js","webpack:///./server/models/item.js","webpack:///./server/controllers/user.controller.js","webpack:///external \"morgan\"","webpack:///./server/config/mongo.config.js"],"names":["exports","badRequest","error","Error","status","notFound","message","UserRoleType","Object","freeze","SUPER_USER","ADMIN","MODERATOR","USER","UserSchema","mongoose","Schema","firstname","type","String","required","lastname","username","email","hashedPassword","select","otp","salt","isArtist","Boolean","profilePicture","coverPicture","meta","role","isActivated","numberOfFavorites","Number","numberOfItemsUploaded","favorites","itemId","itemName","createdDate","Date","default","now","modifiedDate","deletedDate","virtual","set","password","makeSalt","hashed_password","encrypt","get","methods","authenticate","plainText","Math","round","valueOf","random","crypto","createHmac","update","digest","err","statics","getUserById","id","isLean","user","findById","lean","exec","addFavorite","item","data","itemname","name","push","save","model","S3DocumentSchema","key","originalFilename","isDeleted","module","categories","songs","mahabharat","to","from","subject","collection","dbUri","dbTestUri","appLink","env","port","debug","debugLog","app","express","use","bodyParser","json","morgan","static","path","resolve","__dirname","req","res","filePath","sendFile","next","render","listen","mongooseStart","router","Router","API_VERSIONS","V1","post","body","then","catch","Item","getItemById","params","STATUS","keys","findIndex","getItemsByStatus","items","userid","User","send","MessageSchema","senderId","date","ItemStatus","PENDING","REVIEWING","APPROVED","DECLINED","DELETED","ItemCategory","SONG","SUMANG_LILA","RADIO_LILA","ItemSchema","artist","isOldSong","album","category","thumbnail","s3Document","size","downloads","views","plays","uploadedBy","moderatedBy","updatedDate","where","userId","require","hayumConfig","connect"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e9efd3094ebf2d174518","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","exports.badRequest = () => {\n  const error = new Error('Bad Request');\n  error.status = 400;\n  return error;\n};\n\nexports.notFound = (message) => {\n  const error = new Error(message || 'Not Found');\n  error.status = 404;\n  return error;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/errors/index.js","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 3\n// module chunks = 0","/* eslint-disable func-names */\nimport mongoose, { Error } from 'mongoose';\nimport crypto from 'crypto';\nimport { MessageSchema } from './message';\nimport { S3DocumentSchema } from './s3Document';\n\nexport const UserRoleType = Object.freeze({\n  SUPER_USER: 'SUPER_USER',\n  ADMIN: 'ADMIN',\n  MODERATOR: 'MODERATOR',\n  USER: 'USER',\n});\n\nexport const UserSchema = new mongoose.Schema({\n  firstname: { type: String, required: true },\n  lastname: { type: String, required: true },\n  username: { type: String, required: true },\n  email: { type: String, required: true },\n  hashedPassword: { type: String, select: false },\n  otp:  { type: String, select: false },\n  salt:  { type: String, select: false },\n  isArtist: Boolean,\n  profilePicture: S3DocumentSchema,\n  coverPicture: S3DocumentSchema,\n  meta: {\n    role: String,\n    isActivated: Boolean,\n    numberOfFavorites: Number,\n    numberOfItemsUploaded: Number,\n    favorites: [{\n      itemId: String,\n      itemName: String,\n    }],\n  },\n  createdDate: { type: Date, default: Date.now },\n  modifiedDate: Date,\n  deletedDate: Date,\n});\n\nUserSchema.virtual('password')\n  .set(function (password) {\n    if (password === null || password === '') {\n      throw new Error('Password is empty');\n    }\n    this.salt = this.makeSalt();\n    this.hashed_password = this.encrypt(password);\n  })\n  .get(function () {\n    return this.hashed_password;\n  });\n\nUserSchema.methods = {\n  authenticate(plainText) {\n    return (this.encrypt(plainText) === this.hashed_password);\n  },\n\n  makeSalt() {\n    return Math.round(new Date().valueOf() * Math.random());\n  },\n\n  encrypt(password) {\n    if (!password) return '';\n    try {\n      return crypto\n        .createHmac('sha1', this.salt)\n        .update(password)\n        .digest('hex');\n    } catch (err) {\n      return '';\n    }\n  },\n};\n\nUserSchema.statics = {\n  getUserById(id, isLean = true) {\n    const user = this.findById(id);\n    return user.lean(isLean).exec();\n  },\n\n  addFavorite(user, item) {\n    const data = {\n      itemId: item.id,\n      itemname: item.name,\n    };\n\n    user.favorites.push(data);\n    user.save();\n  },\n};\n\nexport default mongoose.model('User', UserSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user.js","import mongoose from 'mongoose';\n\nexport const S3DocumentSchema = new mongoose.Schema({\n  key: String,\n  originalFilename: String,\n  isDeleted: { type: Boolean, default: false },\n  createdDate: { type: Date, default: Date.now },\n  deletedDate: Date,\n});\n\nexport default mongoose.model('S3Document', S3DocumentSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/s3Document.js","/**\n * Created by Devajit on 22-02-2016.\n */\n\nmodule.exports = {\n  categories: {\n    songs: 'song',\n    mahabharat: 'mahabharat',\n    'radio-lila': 'radio-lila',\n    'sumang-lila': 'sumang-lila',\n  },\n\n  email: {\n    to: 'asem.devajit@gmail.com',\n    from: 'noreply.hayum@gmail.com',\n    subject: '\"Hayum\" <noreply.hayum@gmail.com>',\n  },\n\n  collection: 'mp3',\n\n  dbUri: 'mongodb://hayum:hayum@ds149433.mlab.com:49433/heroku_v3fk2w9h',\n  dbTestUri: 'mongodb://127.0.0.1:27017/hayum-alpha',\n\n  appLink: '/hayum.apk',\n  env: 'development',\n  port: 8000,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/hayum.config.js","import express from 'express';\nimport bodyParser from 'body-parser';\nimport path from 'path';\nimport debugLog from 'debug';\nimport controllers from './controllers';\nimport morgan from 'morgan';\nimport mongooseStart from './config/mongo.config';\nimport { port } from './config/hayum.config';\nimport { notFound } from './errors';\n\nconst debug = debugLog('HAYUM: server');\nconst app = express();\n\napp.use(bodyParser.json());\n\napp.use(morgan('combined'));\n// Serve static assets\napp.use(express.static(path.resolve(__dirname, '..', 'build')));\n\napp.use('/api', controllers);\n\napp.use('/', (req, res) => {\n  const filePath = path.resolve(__dirname, '..', 'build', 'index.html');\n  res.sendFile(filePath)\n});\n\napp.use((req, res, next) => {\n  next(notFound());\n});\n\nif (app.get('env') === 'development') {\n  app.use((err, req, res) => {\n    res.status(err.status || 500);\n    res.render('error', {\n      message: err.message,\n      error: err,\n    });\n  });\n}\n\napp.use((err, req, res) => {\n  res.status(err.status || 500);\n  res.render('error', {\n    message: err.message,\n    error: {},\n  });\n});\n\napp.listen(port, (error) => {\n  mongooseStart();\n  if (error) {\n    debug('error', error);\n  }\n  debug('Listening: ', port);\n});\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 10\n// module chunks = 0","import { Router } from 'express';\nimport itemController from './item.controller';\nimport userController from './user.controller';\n\nconst router = Router();\nconst API_VERSIONS = { V1: 'v1'};\n\nrouter.use(`/${API_VERSIONS.V1}/item`, itemController);\nrouter.use(`/${API_VERSIONS.V1}/user`, userController);\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/index.js","import { Router } from 'express';\nimport User from '../models/user';\nimport { badRequest, notFound } from '../errors';\nimport Item, { ItemStatus } from '../models/item';\n\nconst router = Router();\n\n/**\n * /item\n * create item\n */\nrouter.post('/', (req, res, next) => {\n  const item = new Item({\n    ...req.body,\n  });\n\n  item\n    .save()\n    .then(() => {\n      res.json({\n        itemId: item.id,\n      });\n    })\n    .catch(() => {\n      next(badRequest());\n    });\n});\n\n/**\n * /item/{itemId}\n */\nrouter.get('/:id', (req, res, next) => {\n  Item.getItemById(req.params.id)\n    .then(item => res.json({ ...item }))\n    .catch(() => next(notFound('Item Not Found')));\n});\n\n\n/**\n * /item/status/{ItemStatus}\n */\nrouter.get('/status/:status', (req, res, next) => {\n  const STATUS = req.params.status;\n  try {\n    if (\n      Object.keys(ItemStatus).findIndex(status => STATUS === status) !== -1\n    ) {\n      Item.getItemsByStatus(STATUS).then(items => res.json(items));\n    } else {\n      throw badRequest();\n    }\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post('/:id/favorite', async (req, res) => {\n  try {\n    const itemId = req.params.id;\n    const userid = req.get('userid');\n    const item = await Item.getItemById(itemId, false);\n    const user = await User.getUserById(userid, false);\n\n    Item.addFavorite(item, user);\n    User.addFavorite(user, item);\n\n    res.status(200).send();\n  } catch (error) {\n    res.status(500).send();\n  }\n});\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/item.controller.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 13\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 15\n// module chunks = 0","import mongoose from 'mongoose';\n\nexport const MessageSchema = new mongoose.Schema({\n  senderId: String,\n  message: String,\n  date: Date,\n});\n\nexport default mongoose.model('Message', MessageSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/message.js","\nimport mongoose from 'mongoose';\nimport { S3DocumentSchema } from './s3Document';\n\nexport const ItemStatus = Object.freeze({\n  PENDING: 'PENDING',\n  REVIEWING: 'REVIEWING',\n  APPROVED: 'APPROVED',\n  DECLINED: 'DECLINED',\n  DELETED: 'DELETED',\n});\n\nexport const ItemCategory = Object.freeze({\n  SONG: 'SONG',\n  SUMANG_LILA: 'SUMANG_LILA',\n  RADIO_LILA: 'RADIO_LILA',\n});\n\nexport const ItemSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  artist: { type: String, required: true },\n  isOldSong: { type: Boolean, default: false },\n  album: String,\n  category: { type: String, default: ItemCategory.SONG },\n  thumbnail: { type: S3DocumentSchema, required: true },\n  status: { type: String, default: ItemStatus.PENDING },\n  s3Document: S3DocumentSchema,\n  meta: {\n    size: Number,\n    downloads: { type: Number, default: 0 },\n    views: { type: Number, default: 0 },\n    plays: { type: Number, default: 0 },\n    numberOfFavorites: { type: Number, default: 0 }, \n  },\n  uploadedBy: String,\n  moderatedBy: String,\n  createdDate: { type: Date, default: Date.now },\n  updatedDate: Date,\n  deletedDate: Date,\n});\n\nItemSchema.statics = {\n  /**\n   * get all items by status\n   * @param {string} status\n   * @returns {Promise}\n   */\n  getItemsByStatus(status) {\n    return this.where('status', status).lean().exec();\n  },\n\n  /**\n   * get an item by id\n   * @param {string} id\n   * @param isLean\n   * @returns {Promise}\n   */\n  getItemById(id, isLean = true) {\n    const item = this.findById(id);\n    return item.lean(isLean).exec();\n  },\n\n  /**\n   * add Favorite to list\n   * @param item\n   * @param user\n   */\n  addFavorite(item, user) {\n    const data = {\n      userId: user.id,\n      username: user.username,\n    };\n\n    item.meta.favorites.push(data);\n    item.save();\n  },\n};\n\nexport default mongoose.model('Item', ItemSchema);\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/item.js","import { Router } from 'express';\nimport User from '../models/user';\nimport { badRequest, notFound } from '../errors';\n\nconst router = Router();\n\n/**\n * /user\n * create user\n */\nrouter.post('/', (req, res, next) => {\n  const user = new User({\n    ...req.body,\n  });\n\n  user\n    .save()\n    .then(() => {\n      res.json({\n        userId: user.id,\n      });\n    })\n    .catch(() => {\n      next(badRequest());\n    });\n});\n\n/**\n * /user/{userId}\n */\nrouter.get('/:id', (req, res, next) => {\n  User.getUserById(req.params.id)\n    .then(user => res.json({ ...user }))\n    .catch(() => next(notFound('User Not Found')));\n});\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./server/controllers/user.controller.js","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 19\n// module chunks = 0","const mongoose = require('mongoose');\nconst debug = require('debug')('HAYUM: mongo.config');\nconst hayumConfig = require('./hayum.config');\n\nmodule.exports = () => {\n  mongoose.connect(hayumConfig.dbTestUri, (error) => {\n    if (error) {\n      debug(error);\n    }\n    debug('Mongoose connection established');\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/mongo.config.js"],"sourceRoot":""}